# ğŸ“4bsop - Backend
**ìœ„ì½”ë“œ 44ê¸° 1ì°¨ í”„ë¡œì íŠ¸** <br>
í•˜ì´ì—”ë“œ í™”ì¥í’ˆ ë¸Œëœë“œ Aesopì„ ëª¨ë¸ë§í•˜ì—¬ ì»¤ë¨¸ì…œ ì›¹ì‚¬ì´íŠ¸ ì œì‘<br>

> *ì§§ì€ í”„ë¡œì íŠ¸ ê¸°ê°„ë™ì•ˆ ê°œë°œì— ì§‘ì¤‘í•´ì•¼ í•˜ë¯€ë¡œ ë””ìì¸/ê¸°íš ë¶€ë¶„ë§Œ í´ë¡ í–ˆìŠµë‹ˆë‹¤.<br>
ê°œë°œì€ ì´ˆê¸° ì„¸íŒ…ë¶€í„° ì „ë¶€ ì§ì ‘ êµ¬í˜„í–ˆìœ¼ë©°, ìœ„ ë°ëª¨ ë§í¬ëŠ” ëª¨ë‘ ë°±ì•¤ë“œì™€ ì—°ê²°í•˜ì—¬ ì‹¤ì œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ ìˆ˜ì¤€ìœ¼ë¡œ ê°œë°œí•œ ê²ƒì…ë‹ˆë‹¤.*

<br>

## 1. í”„ë¡œì íŠ¸ ê¸°ê°„ & ì¸ì›
* í”„ë¡œì íŠ¸ ê¸°ê°„: 2ì£¼ (2023.04.03 ~ 2023.04.16)   
* ê°œë°œ ì¸ì›:  
  `Frontend`: ê¹€ì˜ìš´, ë°•ì§€ì—° <br>
  `Backend`: ì¥ë‹¤í¬(Project Manager), ì™•ê´‘í˜„(Product Manager) <br>
* [í”„ë¡ íŠ¸ì—”ë“œ Github ì €ì¥ì†Œ](https://github.com/wecode-bootcamp-korea/44-1st-four-branch-frontend)
* ëª¨ë¸ë§í•œ ì‚¬ì´íŠ¸: [ì´ì†(Aesop)](https://www.aesop.com/kr/)

<br>

 ## 2. ì‚¬ìš© ê¸°ìˆ 

* **BackEnd** <br>

   JavaScript <br>
   Node.js v16.15 <br>
   express 4.18 <br>
   MySql 5.7 <br>
   Rest <br>
   Prettier <br>
   Docker <br>
   AWS <br>
 
<br>

* **í˜‘ì—…** <br>

  Git & Git hub <br>
  Trello <br>
  Postman <br>
  Slack <br>
  Notion <br>

<br>

 ## 3. [ERD](https://dbdiagram.io/d/642a58b45758ac5f17262d7c)
 ![4bsop](https://github.com/walwald/44-1st-four-branch-backend/assets/120387100/2a16a5c0-1c81-450b-ad45-fc48c7051a3c)

<br>

 ## 4. í•µì‹¬ ê¸°ëŠ¥
 ì‡¼í•‘ëª° ì›¹ì‚¬ì´íŠ¸ì˜ í•µì‹¬ ê¸°ëŠ¥ì¸ `íšŒì›ê°€ì…/ë¡œê·¸ì¸`, `ìƒí’ˆ ë¦¬ìŠ¤íŠ¸`, `ìƒí’ˆ ìƒì„¸ ì •ë³´`, `ìƒí’ˆ ê²€ìƒ‰`, `ì¥ë°”êµ¬ë‹ˆ`, `ì£¼ë¬¸`, `ê²°ì œ` ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
 
<details>
<summary>í•µì‹¬ ê¸°ëŠ¥ ì„¤ëª… í¼ì¹˜ê¸°</summary>
<div markdown="1">
  
  <br>
 
 **1. íšŒì›ê°€ì…** ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/services/userService.js#L10)
  
 - ê³ ê°€ í™”ì¥í’ˆ ë¸Œëœë“œ íŠ¹ì„±ìƒ êµ¬ë§¤ ì£¼ê¸°ê°€ ê¸¸ê³  ì„ ë¬¼ìš© 1íšŒì„± êµ¬ë§¤ê°€ ë§ë‹¤ëŠ” ì ì„ ê³ ë ¤í•˜ì—¬, user ìˆ˜ì§‘ ì •ë³´ë¥¼ ìµœì†Œí™”í•˜ê³  ì‰½ê³  ê°„í¸í•œ íšŒì› ê°€ì… ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤
 - ì •ê·œí‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ì˜ ìœ íš¨ì„±ì„ ê²€ì¦í•©ë‹ˆë‹¤.
 - ê¸° ê°€ì…ëœ ì´ë©”ì¼ë¡œ ì¤‘ë³µ ê°€ì… ì‹œë„ ì‹œ ê°€ì… ë¶ˆê°€í•˜ë„ë¡ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
 - bcryptë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” í›„ DBì— ì €ì¥í–ˆìŠµë‹ˆë‹¤.
  
<br> 

 **2. ë¡œê·¸ì¸** ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/services/userService.js#L26)
 
 - DBë‚´ ì €ì¥ëœ ì•”í˜¸í™” ëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì‚¬ìš©ìê°€ ì…ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ bcryptë¡œ ì•”í˜¸í™”í•˜ì—¬ ë¹„êµ í›„ ë¶ˆì¼ì¹˜í•˜ì§€ ì‹œ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. 
 - jwtë¥¼ í™œìš©í•˜ì—¬ ë¡œê·¸ì¸ ì„±ê³µ ì‹œ payloadì— user idê°€ ë‹´ê¸´ í† í°ì„ ë°œê¸‰í•©ë‹ˆë‹¤.

  <br> 
  
 **3. ìƒí’ˆ ì •ë³´ ì¡°íšŒ(ë¦¬ìŠ¤íŠ¸/ìƒì„¸ ì •ë³´)** ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/models/productDao.js#L23)

 - `ë©”ì¸ ì¹´í…Œê³ ë¦¬/ì„œë¸Œ ì¹´í…Œê³ ë¦¬ í•„í„°`, `ê°€ê²©ìˆœ ì •ë ¬`ì„ ì ìš©í•˜ì—¬ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë©°, `ìƒí’ˆ id`ë¡œ í•„í„°í•˜ì—¬ ìƒí’ˆë³„ ì •ë³´ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.
 - Frontendì—ì„œ ë™ì¼í•œ endpointì— í•„ìš”ì— ë”°ë¼ ì¡°ê±´ì„ query parameterë¡œ ì¶”ê°€ì—¬ ìš”ì²­í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
 - í™”ì¥í’ˆì— ìˆì–´ ì„±ë¶„ì´ ì¤‘ìš”í•œ ìš”ì†Œì´ë¯€ë¡œ, ì„±ë¶„ê³¼ ìƒí’ˆì„ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¡œ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.
 - Product Dao ë‚´ í•¨ìˆ˜ì—ì„œ ë‹¨ì¶• í‰ê°€ë¥¼ í™œìš©í•˜ì—¬ ê° ì¡°ê±´ë¬¸ì˜ ì¸ì ìœ ë¬´ë¥¼ íŒë‹¨, í•˜ë‚˜ì˜ queryë¬¸ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
 - Order byì™€ Sorting, Offsetê³¼ Limitì™€ ê°™ì´ ë‘ ì¸ìê°€ í•¨ê»˜ ìˆ˜ì‹ ë˜ì–´ì•¼ í•˜ëŠ” ê²½ìš°, í•˜ë‚˜ì˜ ì¸ìë§Œ ìˆ˜ì‹ ë˜ì—ˆì„ ë•Œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
<br>

**4. ìƒí’ˆ ê²€ìƒ‰** ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/models/productDao.js#L3)

 - ê²€ìƒ‰ì–´ë¥¼ query parameterë¡œ ìˆ˜ì‹ í•˜ì—¬ ê²€ìƒ‰ì–´ê°€ ìƒí’ˆëª…ì— í¬í•¨ëœ ìƒí’ˆë“¤ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. 

<br>
  
**5. ì¸ê°€(Authorization)** ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/utils/auth.js#L5)
- `ì¥ë°”êµ¬ë‹ˆ`, `ì£¼ë¬¸`, `ê²°ì œ` ê¸°ëŠ¥ ì´ìš© ì‹œ tokenì„ í•´ë…í•˜ì—¬ payloadì˜ user id í™•ì¸ í›„ ê°€ì…ëœ ê³ ê°ë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ ì¸ê°€ middlewareë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- tokenì´ ìˆ˜ì‹ ë˜ì§€ ì•Šì€ ê²½ìš° tokenì´ í•„ìš”í•˜ë‹¤ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
- payload ë‚´ user idê°€ DBì—ì„œ í™•ì¸ë˜ì§€ ì•Šì„ ê²½ìš° ìœ íš¨í•˜ì§€ ì•Šì€ userë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

<br>
  
**6. ì¥ë°”êµ¬ë‹ˆ CRUD**

- **ìƒì„±:** Cart Dao ë‚´ queryë¬¸ì—ì„œ ON DUPLICATEì„ í™œìš©í•˜ì—¬, ì¹´íŠ¸ì— íŠ¹ì • ìƒí’ˆì´ ë‹´ê²¨ìˆëŠ” ê²½ìš° 'ì¹´íŠ¸ì— ë‹´ê¸°'ë¥¼ ë‹¤ì‹œ í´ë¦­í•˜ì˜€ì„ ë•Œ ìˆ˜ëŸ‰ì´ 1 ì¦ê°€í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/models/cartDao.js#L3)
- **ìˆ˜ëŸ‰ ë³€ê²½:** clientê°€ ì „ë‹¬í•œ ìˆ˜ëŸ‰ìœ¼ë¡œ ìƒí’ˆ ìˆ˜ëŸ‰ì„ ì—…ë°ì´íŠ¸ í•©ë‹ˆë‹¤. ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/models/cartDao.js#L41)
- **ì‚­ì œ:** ì‚­ì œ ìš”ì²­ì— ë”°ë¼ ì¥ë°”êµ¬ë‹ˆ ë‚´ ìƒí’ˆì„ ì‚­ì œí•©ë‹ˆë‹¤. ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/models/cartDao.js#L16)
<br>

**7. ì£¼ë¬¸** ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/models/orderDao.js#L50)

- ë°°ì†¡ ì£¼ì†Œ ë³„ë„ ì €ì¥ í›„, ì£¼ë¬¸ ì •ë³´ì™€ ì£¼ë¬¸ ìƒí’ˆ ì •ë³´ë¥¼ DBì— ì €ì¥í•©ë‹ˆë‹¤.
- uuidë¥¼ ì‚¬ìš©í•˜ì—¬ ê³ ìœ  ì£¼ë¬¸ ë²ˆí˜¸ë¥¼ ìƒì„± í–ˆìŠµë‹ˆë‹¤.
- MySqlì˜ transaction ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ `ì£¼ë¬¸ ì •ë³´ ì €ì¥`ê³¼ `ì£¼ë¬¸ ìƒí’ˆ ì •ë³´ ì €ì¥`ì´ í•¨ê»˜ ì´ë£¨ì–´ì§€ê³ , ì—ëŸ¬ ë°œìƒ ì‹œ í•¨ê»˜ ì² íšŒë˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
<br>

**8. í¬ì¸íŠ¸ ê²°ì œ** ğŸ“Œ[ì½”ë“œ í™•ì¸](https://github.com/walwald/44-1st-four-branch-backend/blob/034a67411cad420e16100865b4ccef38cd4ab8ee/models/orderDao.js#L4)
  
- íšŒì›ì´ ë³´ìœ í•œ í¬ì¸íŠ¸ì—ì„œ ì£¼ë¬¸ ì´ì•¡ì´ ì°¨ê°ë˜ëŠ” APIì…ë‹ˆë‹¤.
- MySqlì˜ transaction ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ `ê³ ê° í¬ì¸íŠ¸ ì°¨ê°`, `ì£¼ë¬¸ ë° ì£¼ë¬¸ ìƒí’ˆ ìƒíƒœ ì—…ë°ì´íŠ¸ (ê²°ì œ ëŒ€ê¸° -> ê²°ì œ ì™„ë£Œ)`, `ì¹´íŠ¸ ë‚´ì—­ ì‚­ì œ`ê°€ í•¨ê»˜ ë™ì‘í•˜ë©°, ì—ëŸ¬ ë°œìƒ ì‹œ í•¨ê»˜ ì² íšŒë˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
- ì£¼ë¬¸ ì´ì•¡ì´ ë³´ìœ  í¬ì¸íŠ¸ë³´ë‹¤ ì ì„ ê²½ìš° ì—ëŸ¬ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

</div>
</details>
<br>

<br>

## 5. í•µì‹¬ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
 **1. ìƒí’ˆ ì¡°íšŒ API - productDao ì¿¼ë¦¬ë¬¸ íš¨ìœ¨í™”**
- ìƒí’ˆë¦¬ìŠ¤íŠ¸ì™€ ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ êµ¬í˜„ì„ ìœ„í•´ [ìƒìœ„ ì¹´í…Œê³ ë¦¬, í•˜ìœ„ ì¹´í…Œê³ ë¦¬, ì •ë ¬ ì¡°ê±´, í˜ì´ì§€ë„¤ì´ì…˜, ìƒí’ˆ id] ë“± ë‹¤ì–‘í•œ ì¡°ê±´ì— ë”°ë¼ ìƒí’ˆ ì •ë³´ë¥¼ ë³´ë‚´ëŠ” API êµ¬í˜„í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 
- ì²˜ìŒì—ëŠ” ê° ì¡°ê±´ì— ë”°ë¼ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” functionì„ productDao ë‚´ì— ê°ê° ì‘ì„±í–ˆìŠµë‹ˆë‹¤. 
- ê°™ì€ SELECTë¬¸ì— ì¡°ê±´ë§Œ ë‹¤ë¥´ê²Œ ë¶™ì€ í•¨ìˆ˜ë¥¼ ë°˜ë³µì ìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ê³¼ì •ì—ì„œ, í•˜ë‚˜ì˜ í•¨ìˆ˜ë¡œ ì´ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ëŠ” ì—†ì„ê¹Œ í•˜ëŠ” ì˜êµ¬ì‹¬ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.
- í•˜ë‚˜ì˜ í•¨ìˆ˜ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ if-else ifë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì¡°ê±´ì— ë”°ë¼ ì¿¼ë¦¬ë¬¸ì´ ë‹¬ë¼ì§€ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.  

  <details>
  <summary>if-else ifë¬¸ì„ í™œìš©í•œ ì½”ë“œ</summary>
  <div markdown="1">
  
    
    ```Javascript
    //productDao.js - ifë¬¸ì„ í™œìš©í•œ getProductByCondition í•¨ìˆ˜

    const getProductsByCondition = async (subId, mainId, pId, isMain) => {
      try {
        let condition = '';
        if (subId) {
          condition = `WHERE sc.id = ${subId}`;
        } else if (mainId) {
          condition = `WHERE m.id = ${mainId}`;
        } else if (pId) {
          condition = `WHERE p.id = ${pId}`;
        } else if (isMain) {
          condition = `WHERE p.main_product = ${isMain}`;
        }

        return await appDataSource.query(
          `SELECT 
            p.id,
            p.name,
            p.price,
            p.description,
            p.size_id sizeId,
            p.sub_category_id subCategoryId,
            s.size size,
            sc.name subCategoryName,
            m.id mainCategoryId,
            m.name mainCategoryName,
            i.url imageUrl,
            joined_ig.ig_array ingredients
        FROM products p
        JOIN sizes s ON p.size_id = s.id
        JOIN sub_categories sc ON sc.id = p.sub_category_id
        JOIN main_categories m ON sc.main_category_id = m.id
        JOIN products_images pi ON p.id = pi.product_id
        JOIN images i ON i.id = pi.image_id
        JOIN (
            SELECT
                pig.product_id pid,
                JSON_ARRAYAGG(ig.name) ig_array
            FROM ingredients ig
            JOIN products_ingredients pig ON pig.ingredient_id = ig.id
            GROUP BY pig.product_id
        ) joined_ig ON joined_ig.pid = p.id        
        ${condition}`
        );
      } catch (err) {
        err.message = 'DATABASE_ERROR';
        err.statusCode = 400;
        throw err;
      }
    };
  ```
  </div>
  </details>
    
 - if-else ifë¬¸ì„ ì‚¬ìš©í•œ í•¨ìˆ˜ì—ì„œëŠ” ì •ë ¬ê³¼ í˜ì´ì§€ë„¤ì´ì…˜ì´ ë“± ì—¬ëŸ¬ ì¡°ê±´ì´ ë™ì‹œì— ì ìš©ë˜ê¸° ì–´ë µë‹¤ëŠ” ì‚¬ì‹¤ì„ ê¹¨ë‹«ê³ , ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `ë‹¨ì¶• í‰ê°€`ë¥¼ í™œìš©í•˜ì—¬ í•¨ìˆ˜ë¥¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
  
    <details>
    <summary>ë‹¨ì¶• í‰ê°€ë¥¼ í™œìš©í•œ ì½”ë“œ</summary>
    <div markdown="1">
      
      ```JavaScript
      //productDao.js - ë‹¨ì¶• í‰ê°€ë¥¼ í™œìš©í•œ getProductsByCondition í•¨ìˆ˜

      const getProductsByCondition = async (
        subId,
        mainId,
        pId,
        isMain,
        orderBy,
        sorting,
        offset = 0,
        limit = 10
      ) => {
        try {
          const conditions = [
            subId && `WHERE sc.id = ${subId}`,
            mainId && `WHERE m.id = ${mainId}`,
            pId && `WHERE p.id = ${pId}`,
            isMain && `WHERE p.main_product = ${isMain}`,
          ].filter(Boolean);

          const orderings = [
            orderBy && `ORDER BY ${orderBy}`,
            sorting && `${sorting}`,
          ].filter(Boolean);

          const pagination = [
            limit && `LIMIT ${limit}`,
            offset && `OFFSET ${offset}`,
          ].filter(Boolean);

          const condition = conditions[0] || '';
          const ordering = orderings.join(' ') || '';
          const paging = pagination.join(' ') || '';

          return await appDataSource.query(
            `SELECT 
              p.id,
              p.name,
              p.price,
              p.description,
              p.summary,
              p.size_id sizeId,
              p.sub_category_id subCategoryId,
              s.size size,
              sc.name subCategoryName,
              m.id mainCategoryId,
              m.name mainCategoryName,
              i.url imageUrl,
              joined_ig.ig_array ingredients
          FROM products p
          LEFT JOIN sizes s ON p.size_id = s.id
          LEFT JOIN sub_categories sc ON sc.id = p.sub_category_id
          LEFT JOIN main_categories m ON sc.main_category_id = m.id
          LEFT JOIN products_images pi ON p.id = pi.product_id
          LEFT JOIN images i ON i.id = pi.image_id
          LEFT JOIN (
              SELECT
                  pig.product_id pid,
                  JSON_ARRAYAGG(ig.name) ig_array
              FROM ingredients ig
              JOIN products_ingredients pig ON pig.ingredient_id = ig.id
              GROUP BY pig.product_id
          ) joined_ig ON joined_ig.pid = p.id        
          ${condition}
          ${ordering}
          ${paging}`
          );
        } catch (err) {
          err.message = 'DATABASE_ERROR';
          err.statusCode = 400;
          throw err;
        }
      };
      
      ```
      
      - [orderBy - sorting], [offset - limit]ê³¼ ê°™ì´ ê²½ìš° ë°˜ë“œì‹œ pairë¡œ ë“¤ì–´ì™€ì•¼í•˜ëŠ” ê²½ìš°ë¥¼ ì»¤ë²„í•˜ê¸° ìœ„í•´ productService í•¨ìˆ˜ ë‚´ì— ì—ëŸ¬ í•¸ë“¤ëŸ¬ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

      ```JavaScript
      //productService.js - ë°˜ë“œì‹œ í•¨ê»˜ ë“¤ì–´ì™€ì•¼ í•˜ëŠ” ì¸ìì— ëŒ€í•œ ì—ëŸ¬ì²˜ë¦¬ ifë¬¸

      if (!orderBy !== !sorting) {
        const err = new Error('CONDITION_NEEDS_TO_BE_PAIR');
        err.statusCode = 400;
        throw err;
      }

      if (!offset !== !limit) {
        const err = new Error('CONDITION_NEEDS_TO_BE_PAIR');
        err.statusCode = 400;
        throw err;
      }
      ```
    </div>
    </details>
  
  <br>
    
 **2. ê²°ì œ API - ì”ì•¡ ë¶€ì¡± ì—ëŸ¬ í•´ê²°**
- point ê²°ì œ API í†µì‹  ì¤‘, userì˜ ë³´ìœ  pointê°€ ì¶©ë¶„í•¨ì—ë„ ì”ì•¡ ë¶€ì¡± Errorê°€ ë°œìƒí•˜ëŠ” ìƒí™©ì´ ìƒê²¼ìŠµë‹ˆë‹¤. 
- console.log()ë¡œ ë°ì´í„° íƒ€ì…ì„ í™•ì¸í•˜ì—¬ ë¬¸ì œë¥¼ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

  <details>
  <summary>ê¸°ì¡´ ì½”ë“œ</summary>
  <div markdown="1">

    ```JavaScript
    //orderService.js - ì”ì•¡ì´ ì¶©ë¶„í•´ë„ ì”ì•¡ ë¶€ì¡± ì—ëŸ¬ê°€ ë‚¬ë˜ ê¸°ì¡´ ì½”ë“œ

    if (user.point < order.totalPrice) {
        const err = new Error('INSUFFICIENT_POINT');
        err.statusCode = 400;
        throw err;
    };
    ```

  </div>
  </details>

  
- userì˜ pointì™€ ì£¼ë¬¸ ì´ì•¡(totalPrice)ì´ `string` íƒ€ì…ìœ¼ë¡œ ì¸ì‹ë˜ì–´ pointê°€ `10,000,000` ìˆë”ë¼ë„ ì£¼ë¬¸ ì´ì•¡ì´ `900,000`ì´ë¼ë©´ ifë¬¸ì´ ì‹¤í–‰ë˜ì–´ ì—ëŸ¬ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤.
- ë‘ ê°’ì„ number íƒ€ì…ìœ¼ë¡œ ì¸ì‹ì‹œí‚¤ê¸° ìœ„í•´ ë¹¼ê¸°(-) ì—°ì‚°ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. 
  
  <details>
  <summary>ìˆ˜ì •ëœ ì½”ë“œ</summary>
  <div markdown="1">
    
   ```JavaScript
    //orderService.js - ìˆ«ìë¡œ ì¸ì‹ë˜ë„ë¡ ìˆ˜ì •í•œ ì½”ë“œ

    if (user.point - order.totalPrice < 0) {
        const err = new Error('INSUFFICIENT_POINT');
        err.statusCode = 400;
        throw err;
    }
   ```
                                          
<br>
                                          
  </div>
  </details>

<br>
  
## 6. ëŠë‚€ì /íšŒê³ 
> 1ì°¨ í”„ë¡œì íŠ¸ íšŒê³ : https://walwaldev.tistory.com/49
    
  <br>
  
## Reference

- ì´ í”„ë¡œì íŠ¸ëŠ” [ì´ì†](https://www.aesop.com/kr/) ì‚¬ì´íŠ¸ë¥¼ ì°¸ì¡°í•˜ì—¬ í•™ìŠµëª©ì ìœ¼ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.
- ì‹¤ë¬´ìˆ˜ì¤€ì˜ í”„ë¡œì íŠ¸ì´ì§€ë§Œ í•™ìŠµìš©ìœ¼ë¡œ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— ì´ ì½”ë“œë¥¼ í™œìš©í•˜ì—¬ ì´ë“ì„ ì·¨í•˜ê±°ë‚˜ ë¬´ë‹¨ ë°°í¬í•  ê²½ìš° ë²•ì ìœ¼ë¡œ ë¬¸ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì‚¬ì§„ ëŒ€ë¶€ë¶„ì€ ìœ„ì½”ë“œì—ì„œ êµ¬ë§¤í•œ ê²ƒì´ë¯€ë¡œ í•´ë‹¹ í”„ë¡œì íŠ¸ ì™¸ë¶€ì¸ì´ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
